<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>World Time Zones Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Load Leaflet from local files -->
  <link rel="stylesheet" href="leaflet.css" />
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    #map {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
    .time-label {
      font-size: 14px;
      background: white;
      padding: 4px 6px;
      border-radius: 4px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      color: black;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <!-- Load Leaflet from local file -->
  <script src="leaflet.js"></script>
  <script>
    const cities = [
      { name: "New York", tz: "America/New_York", lat: 40.7128, lon: -74.006 },
      { name: "SÃ£o Paulo", tz: "America/Sao_Paulo", lat: -23.5505, lon: -46.6333 },
      { name: "London", tz: "Europe/London", lat: 51.5072, lon: -0.1276 },
      { name: "Berlin", tz: "Europe/Berlin", lat: 52.52, lon: 13.405 },
      { name: "Moscow", tz: "Europe/Moscow", lat: 55.7558, lon: 37.6173 },
      { name: "Dubai", tz: "Asia/Dubai", lat: 25.2048, lon: 55.2708 },
      { name: "Mumbai", tz: "Asia/Kolkata", lat: 19.076, lon: 72.8777 },
      { name: "Bangkok", tz: "Asia/Bangkok", lat: 13.7563, lon: 100.5018 },
      { name: "Beijing", tz: "Asia/Shanghai", lat: 39.9042, lon: 116.4074 },
      { name: "Tokyo", tz: "Asia/Tokyo", lat: 35.6895, lon: 139.6917 },
      { name: "Sydney", tz: "Australia/Sydney", lat: -33.8688, lon: 151.2093 },
      { name: "Auckland", tz: "Pacific/Auckland", lat: -36.8485, lon: 174.7633 }
    ];

    const map = L.map("map").setView([20, 0], 2);

    L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution:
        '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    const markers = [];

    function updateTimes() {
      markers.forEach(m => map.removeLayer(m));
      cities.forEach(city => {
        const time = new Date().toLocaleTimeString("en-US", {
          timeZone: city.tz,
          hour: '2-digit',
          minute: '2-digit',
          second: '2-digit'
        });

        const label = L.divIcon({
          className: 'time-label',
          html: `<strong>${city.name}</strong><br>${time}`,
          iconSize: [100, 40]
        });

        const marker = L.marker([city.lat, city.lon], { icon: label });
        marker.addTo(map);
        markers.push(marker);
      });
    }

    updateTimes();
    setInterval(updateTimes, 1000);
  </script>
</body>
</html>
